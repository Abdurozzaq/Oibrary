(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{99:function(a,t,e){"use strict";e.r(t);var n=e(0),r=e.n(n),s=e(15),l={data:function(){return{format:s.a,serverError:null,errorAlert:!1,snack:!1,snackColor:null,snackText:null,search:null,daftarPeminjaman:null,daftarPeminjamanFiltered:null,overlay:!1,headers:[{text:"Kode Peminjaman",align:"start",sortable:!0,value:"kode_peminjaman_full"},{text:"Kode Peminjam",align:"start",sortable:!0,value:"kode_user_full"},{text:"Nama Peminjam",align:"start",sortable:!0,value:"nama_peminjam"},{text:"Judul Buku",align:"start",sortable:!0,value:"judul_buku"},{text:"Pengarang",align:"start",sortable:!0,value:"pengarang_buku"},{text:"Tgl Pinjam",align:"start",sortable:!0,value:"tanggal_pinjam"},{text:"Jumlah Buku",align:"start",sortable:!0,value:"jumlah_buku"},{text:"Tgl Harus Kembali",align:"start",sortable:!0,value:"tanggal_harus_kembali"},{text:"Denda",align:"start",sortable:!0,value:"denda"},{text:"Terlambat",align:"start",sortable:!0,value:"terlambat"},{text:"Action",value:"action",sortable:!1}]}},methods:{getData:function(){var a=this;a.overlay=!0,r.a.get("api/perpus/sikulasi/list").then((function(t){a.daftarPeminjaman=t.data.data,a.overlay=!1})).catch((function(t){a.snack=!0,a.snackColor="error",a.snackText="Tidak Bisa Mendapatkan Data Peminjaman",a.overlay=!1}))},searchPeminjaman:function(){var a=this;null!=a.search?a.daftarPeminjamanFiltered=a.daftarPeminjaman.filter((function(t){return t.kode_peminjaman_full.toLowerCase().includes(a.search.toLowerCase())||t.judul_buku.toLowerCase().includes(a.search.toLowerCase())||t.pengarang_buku.toLowerCase().includes(a.search.toLowerCase())||t.kode_user_full.toLowerCase().includes(a.search.toLowerCase())||t.first_name.toLowerCase().includes(a.search.toLowerCase())||t.last_name.toLowerCase().includes(a.search.toLowerCase())||t.tanggal_pinjam.toLowerCase().includes(a.search.toLowerCase())||t.tanggal_harus_kembali.toLowerCase().includes(a.search.toLowerCase())})):a.daftarPeminjamanFiltered=null},perpanjang:function(a){var t=this;t.overlay=!0,r.a.post("api/perpus/perpanjang-buku/"+a.id).then((function(a){t.snack=!0,t.snackColor="success",t.snackText="Berhasil Perpanjang Buku!",t.overlay=!1,t.getData()})).catch((function(a){t.snack=!0,t.snackColor="error",t.snackText="Tidak Bisa Perpanjang Buku",t.overlay=!1}))},kembalikan:function(a){var t=this;t.overlay=!0,r.a.post("api/perpus/kembalikan-buku/"+a.id).then((function(a){t.snack=!0,t.snackColor="success",t.snackText="Berhasil Mengembalikan Buku!",t.overlay=!1,t.getData()})).catch((function(a){t.snack=!0,t.snackColor="error",t.snackText="Tidak Bisa Mengembalikan Buku",t.overlay=!1}))}},mounted:function(){this.getData()}},i=e(2),o=Object(i.a)(l,(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"ma-5"},[e("v-alert",{attrs:{border:"top",color:"red lighten-2",dark:"",dismissible:""},model:{value:a.errorAlert,callback:function(t){a.errorAlert=t},expression:"errorAlert"}},a._l(a.serverError,(function(t,n){return e("ul",{key:n},[e("li",[a._v("\n        "+a._s(t[0])+"\n      ")])])})),0),a._v(" "),e("v-card",[e("v-card-title",[a._v("\n    Sirkulasi\n      "),e("v-spacer"),a._v(" "),e("v-text-field",{staticClass:"mb-3",attrs:{"append-icon":"mdi-magnify",label:"Masukan Sesuatu...",hint:"Search","persistent-hint":"","single-line":"","append-outer-icon":"mdi-send"},on:{"click:append-outer":a.searchPeminjaman},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1),a._v(" "),a.daftarPeminjaman&&null==a.daftarPeminjamanFiltered?e("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headers,items:a.daftarPeminjaman,"items-per-page":5},scopedSlots:a._u([{key:"item.nama_peminjam",fn:function(t){var n=t.item;return[e("span",[a._v(a._s(n.first_name)+" "+a._s(n.last_name))])]}},{key:"item.tanggal_pinjam",fn:function(t){var n=t.item;return[e("span",[a._v(a._s(a.format(new Date(n.tanggal_pinjam),"dd/MM/yyyy")))])]}},{key:"item.tanggal_harus_kembali",fn:function(t){var n=t.item;return[e("span",[a._v(a._s(a.format(new Date(n.tanggal_harus_kembali),"dd/MM/yyyy")))])]}},{key:"item.denda",fn:function(t){var n=t.item;return[null!=n.denda?e("span",{staticClass:"red--text font-weight-bold"},[a._v("Rp."+a._s(n.denda))]):e("span",{staticClass:"font-weight-bold"},[a._v("-")])]}},{key:"item.terlambat",fn:function(t){var n=t.item;return[null!=n.terlambat?e("span",{staticClass:"red--text font-weight-bold"},[a._v(a._s(n.terlambat)+" Hari")]):e("span",{staticClass:"font-weight-bold"},[a._v("-")])]}},{key:"item.action",fn:function(t){return[e("v-tooltip",{attrs:{bottom:""},scopedSlots:a._u([{key:"activator",fn:function(n){var r=n.on,s=n.attrs;return[e("v-btn",a._g(a._b({staticClass:"ma-2",attrs:{dark:"",small:"",color:"green"},on:{click:function(e){return e.preventDefault(),a.perpanjang(t.item)}}},"v-btn",s,!1),r),[e("v-icon",{attrs:{dark:""}},[a._v("mdi-autorenew")]),a._v("\n              Perpanjang\n            ")],1)]}}],null,!0)},[a._v(" "),e("span",[a._v("Perpanjang")])]),a._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:a._u([{key:"activator",fn:function(n){var r=n.on,s=n.attrs;return[e("v-btn",a._g(a._b({staticClass:"ma-2",attrs:{dark:"",small:"",color:"amber"},on:{click:function(e){return e.preventDefault(),a.kembalikan(t.item)}}},"v-btn",s,!1),r),[e("v-icon",{attrs:{dark:""}},[a._v("mdi-inbox-arrow-down")]),a._v("\n              Kembalikan\n            ")],1)]}}],null,!0)},[a._v(" "),e("span",[a._v("Kembalikan")])])]}}],null,!0)}):a._e(),a._v(" "),a.daftarPeminjaman&&null!=a.daftarPeminjamanFiltered?e("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headers,items:a.daftarPeminjamanFiltered,"items-per-page":5},scopedSlots:a._u([{key:"item.nama_peminjam",fn:function(t){var n=t.item;return[e("span",[a._v(a._s(n.first_name)+" "+a._s(n.last_name))])]}},{key:"item.tanggal_pinjam",fn:function(t){var n=t.item;return[e("span",[a._v(a._s(a.format(new Date(n.tanggal_pinjam),"dd/MM/yyyy")))])]}},{key:"item.tanggal_harus_kembali",fn:function(t){var n=t.item;return[e("span",[a._v(a._s(a.format(new Date(n.tanggal_harus_kembali),"dd/MM/yyyy")))])]}},{key:"item.denda",fn:function(t){var n=t.item;return[null!=n.denda?e("span",{staticClass:"red--text font-weight-bold"},[a._v("Rp."+a._s(n.denda))]):e("span",{staticClass:"font-weight-bold"},[a._v("-")])]}},{key:"item.terlambat",fn:function(t){var n=t.item;return[null!=n.terlambat?e("span",{staticClass:"red--text font-weight-bold"},[a._v(a._s(n.terlambat)+" Hari")]):e("span",{staticClass:"font-weight-bold"},[a._v("-")])]}},{key:"item.action",fn:function(t){return[e("v-tooltip",{attrs:{bottom:""},scopedSlots:a._u([{key:"activator",fn:function(n){var r=n.on,s=n.attrs;return[e("v-btn",a._g(a._b({staticClass:"ma-2",attrs:{dark:"",small:"",color:"green"},on:{click:function(e){return e.preventDefault(),a.perpanjang(t.item)}}},"v-btn",s,!1),r),[e("v-icon",{attrs:{dark:""}},[a._v("mdi-autorenew")]),a._v("\n              Perpanjang\n            ")],1)]}}],null,!0)},[a._v(" "),e("span",[a._v("Perpanjang")])]),a._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:a._u([{key:"activator",fn:function(n){var r=n.on,s=n.attrs;return[e("v-btn",a._g(a._b({staticClass:"ma-2",attrs:{dark:"",small:"",color:"amber"},on:{click:function(e){return e.preventDefault(),a.kembalikan(t.item)}}},"v-btn",s,!1),r),[e("v-icon",{attrs:{dark:""}},[a._v("mdi-inbox-arrow-down")]),a._v("\n              Kembalikan\n            ")],1)]}}],null,!0)},[a._v(" "),e("span",[a._v("Kembalikan")])])]}}],null,!0)}):a._e(),a._v(" "),e("v-overlay",{attrs:{absolute:!0,value:a.overlay}},[e("v-progress-circular",{attrs:{size:50,color:"white",indeterminate:""}})],1)],1),a._v(" "),e("v-snackbar",{attrs:{top:"",timeout:3e3,color:a.snackColor},scopedSlots:a._u([{key:"action",fn:function(t){var n=t.attrs;return[e("v-btn",a._b({attrs:{text:""},on:{click:function(t){a.snack=!1}}},"v-btn",n,!1),[a._v("Close")])]}}]),model:{value:a.snack,callback:function(t){a.snack=t},expression:"snack"}},[a._v("\n    "+a._s(a.snackText)+"\n\n    ")])],1)}),[],!1,null,null,null);t.default=o.exports}}]);