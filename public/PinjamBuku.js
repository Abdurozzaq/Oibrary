(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{98:function(t,a,e){"use strict";e.r(a);var u=e(0),i=e.n(u),s={data:function(){return{daftarBuku:null,search:null,daftarBukuFiltered:null,bukuTerpilih:[],overlaybukuTerpilih:!1,headers:[{text:"Judul",sortable:!1,value:"judul_buku"},{text:"Pengarang",sortable:!1,value:"pengarang_buku"},{text:"Jumlah",sortable:!1,value:"jumlah_buku"},{text:"Action",value:"action",sortable:!1}],daftarAnggota:null,id_anggota:null,array_id_anggota:null,snack:!1,snackColor:null,snackText:null,serverError:null,errorAlert:!1}},methods:{getBuku:function(){var t=this;i.a.get("api/perpus/buku/list").then((function(a){0==a.data.data.length?t.daftarBuku=null:t.daftarBuku=a.data.data})).catch((function(a){t.snack=!0,t.snackColor="error",t.snackText="Tidak Bisa Mendapatkan Data Buku!"}))},getAnggota:function(){var t=this;i.a.get("api/perpus/users/member/list").then((function(a){t.daftarAnggota=a.data.data})).catch((function(a){t.snack=!0,t.snackColor="error",t.snackText="Tidak Bisa Mendapatkan Data Buku!"}))},searchBuku:function(){var t=this;null!=t.search?t.daftarBukuFiltered=t.daftarBuku.filter((function(a){return a.kode_buku_full.toLowerCase().includes(t.search.toLowerCase())||a.judul_buku.toLowerCase().includes(t.search.toLowerCase())||a.penerbit_buku.toLowerCase().includes(t.search.toLowerCase())||a.pengarang_buku.toLowerCase().includes(t.search.toLowerCase())||a.tahun_terbit_buku.toLowerCase().includes(t.search.toLowerCase())||a.lokasi_rak.toLowerCase().includes(t.search.toLowerCase())||a.nama_rak.toLowerCase().includes(t.search.toLowerCase())})):t.daftarBukuFiltered=null},pilihBuku:function(t){0==this.bukuTerpilih.length?this.bukuTerpilih.push({id_member:this.id_anggota,id_buku:t.id,judul_buku:t.judul_buku,pengarang_buku:t.pengarang_buku,jumlah_buku:1,stok_buku:t.stok_buku}):0==this.bukuTerpilih.filter((function(a){return a.id_buku==t.id})).length?this.bukuTerpilih.push({id_member:this.id_anggota,id_buku:t.id,judul_buku:t.judul_buku,pengarang_buku:t.pengarang_buku,jumlah_buku:1,stok_buku:t.stok_buku}):(this.snack=!0,this.snackColor="error",this.snackText="Buku sudah ada di pilih!")},tidakJadiPilihBuku:function(t){this.bukuTerpilih.splice(this.bukuTerpilih.indexOf(t),1)},save:function(t){this.snack=!0,this.snackColor="success",this.snackText="Jumlah Buku Diubah"},cancel:function(){this.snack=!0,this.snackColor="error",this.snackText="Tidak Jadi Ubah Jumlah Buku."},pinjam:function(){var t=this;t.overlaybukuTerpilih=!0,i.a.post("api/perpus/pinjam-buku",t.bukuTerpilih).then((function(a){t.snack=!0,t.snackColor="success",t.snackText="Berhasil Pinjam Buku",t.$router.push("/perpus/sirkulasi")})).catch((function(a){t.overlaybukuTerpilih=!1,a.response&&(t.serverError=a.response.data.errors,t.errorAlert=!0)}))}},mounted:function(){this.getAnggota(),this.getBuku()}},n=e(2),r=Object(n.a)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-card",{staticClass:"mb-5"},[e("v-card-title",[e("v-icon",{attrs:{large:"",left:"",color:"grey"}},[t._v("\n        mdi-book-multiple\n      ")]),t._v(" "),e("span",{staticClass:"title grey--text",attrs:{color:"white"}},[t._v("Pinjam Buku.")])],1)],1),t._v(" "),e("v-card",{staticClass:"mb-4"},[e("v-card-title",[t._v("\n     1. Pilih Anggota\n    ")]),t._v(" "),e("v-card-text",[e("v-autocomplete",{attrs:{items:t.daftarAnggota,hint:"Harus Di Isi!","persistent-hint":"","item-text":function(t){return t.kode_user_full+" - "+t.first_name+" "+t.last_name},"item-value":"id",label:"Pilih Anggota"},model:{value:t.id_anggota,callback:function(a){t.id_anggota=a},expression:"id_anggota"}})],1)],1),t._v(" "),e("v-card",{staticClass:"mb-4"},[e("v-card-title",[t._v("\n    2. Pilih Buku\n      "),e("v-spacer"),t._v(" "),e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Ketikan Sesuatu...",hint:"Cari Buku","single-line":"","persistent-hint":"","append-outer-icon":"mdi-send"},on:{"click:append-outer":t.searchBuku},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}})],1),t._v(" "),e("v-sheet",{staticClass:"mx-auto"},[t.daftarBuku&&null==t.daftarBukuFiltered?e("v-slide-group",{attrs:{"show-arrows":"always"}},t._l(t.daftarBuku,(function(a,u){return e("v-slide-item",{key:u,staticClass:"mx-lg-auto mx-md-5 mx-sm-5 mx-sm-5 mb-3"},[e("v-card",{staticClass:"mx-5 my-8 blue-grey lighten-5",attrs:{width:"200px"}},[a.foto_buku?e("v-img",{attrs:{height:"150",src:a.foto_buku}}):e("v-img",{attrs:{height:"150",src:"/statics/buku-cover.jpg"}}),t._v(" "),e("div",{staticClass:"mx-4 mt-3"},[e("div",{staticClass:"text-h6"},[t._v(t._s(a.judul_buku))])]),t._v(" "),e("v-card-text",[e("div",{staticClass:"subtitle-1"},[t._v("\n                Pengarang: "+t._s(a.pengarang_buku)+"\n              ")]),t._v(" "),e("div",{staticClass:"subtitle-1"},[t._v("\n                Penerbit: "+t._s(a.penerbit_buku)+"\n              ")]),t._v(" "),e("div",{staticClass:"subtitle-1"},[t._v("\n                Tahun Terbit: "+t._s(a.tahun_terbit_buku)+"\n              ")]),t._v(" "),e("div",{staticClass:"subtitle-1"},[t._v("\n                Banyak Halaman: "+t._s(a.jumlah_halaman_buku)+"\n              ")]),t._v(" "),e("div",{staticClass:"subtitle-1"},[t._v("\n                "+t._s(a.stok_buku)+" tersisa\n              ")])]),t._v(" "),e("v-divider",{staticClass:"mx-4"}),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{color:"deep-purple lighten-2",text:"",disabled:0==a.stok_buku||null==t.id_anggota},on:{click:function(e){return e.preventDefault(),t.pilihBuku(a)}}},[t._v("\n                Pilih Buku\n              ")])],1)],1)],1)})),1):t._e(),t._v(" "),t.daftarBuku&&null!=t.daftarBukuFiltered?e("v-slide-group",{attrs:{"show-arrows":"always"}},t._l(t.daftarBukuFiltered,(function(a,u){return e("v-slide-item",{key:u,staticClass:"mx-lg-auto mx-md-5 mx-sm-5 mx-sm-5 mb-3"},[e("v-card",{staticClass:"mx-5 my-8 blue-grey lighten-5",attrs:{width:"200px"}},[a.foto_buku?e("v-img",{attrs:{height:"150",src:a.foto_buku}}):e("v-img",{attrs:{height:"150",src:"/statics/buku-cover.jpg"}}),t._v(" "),e("div",{staticClass:"mx-4 mt-3"},[e("div",{staticClass:"text-h6"},[t._v(t._s(a.judul_buku))])]),t._v(" "),e("v-card-text",[e("div",{staticClass:"subtitle-1"},[t._v("\n                Pengarang: "+t._s(a.pengarang_buku)+"\n              ")]),t._v(" "),e("div",{staticClass:"subtitle-1"},[t._v("\n                Penerbit: "+t._s(a.penerbit_buku)+"\n              ")]),t._v(" "),e("div",{staticClass:"subtitle-1"},[t._v("\n                Tahun Terbit: "+t._s(a.tahun_terbit_buku)+"\n              ")]),t._v(" "),e("div",{staticClass:"subtitle-1"},[t._v("\n                Banyak Halaman: "+t._s(a.jumlah_halaman_buku)+"\n              ")]),t._v(" "),e("div",{staticClass:"subtitle-1"},[t._v("\n                "+t._s(a.stok_buku)+" tersisa\n              ")])]),t._v(" "),e("v-divider",{staticClass:"mx-4"}),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{color:"deep-purple lighten-2",text:"",disabled:0==a.stok_buku||null==t.id_anggota},on:{click:function(e){return e.preventDefault(),t.pilihBuku(a)}}},[t._v("\n                Pilih Buku\n              ")])],1)],1)],1)})),1):t._e()],1),t._v(" "),null==t.daftarBuku?e("div",{staticClass:"text-h6 mb-10 text-center"},[t._v("Maaf Tidak Ada Data Buku Yang Ditemukan.")]):t._e()],1),t._v(" "),e("v-alert",{attrs:{border:"top",color:"red lighten-2",dark:"",dismissible:""},model:{value:t.errorAlert,callback:function(a){t.errorAlert=a},expression:"errorAlert"}},t._l(t.serverError,(function(a,u){return e("ul",{key:u},[e("li",[t._v("\n        "+t._s(a[0])+"\n      ")])])})),0),t._v(" "),e("v-card",{staticClass:"mb-3"},[e("v-card-title",[t._v("\n      3. Buku Yang Terpilih:\n      "),e("v-spacer"),t._v(" "),e("v-btn",{staticClass:"ma-2 white--text",attrs:{color:"blue-grey",disabled:null==t.id_anggota},on:{click:function(a){return a.preventDefault(),t.pinjam()}}},[t._v("\n        Pinjam\n        "),e("v-icon",{attrs:{right:"",dark:""}},[t._v("mdi-send")])],1)],1),t._v(" "),e("v-data-table",{attrs:{headers:t.headers,items:t.bukuTerpilih,"hide-default-footer":""},scopedSlots:t._u([{key:"item.jumlah_buku",fn:function(a){return[e("v-edit-dialog",{attrs:{"return-value":a.item.jumlah_buku,large:"",persistent:""},on:{"update:returnValue":function(e){return t.$set(a.item,"jumlah_buku",e)},"update:return-value":function(e){return t.$set(a.item,"jumlah_buku",e)},save:function(e){return t.save(a.item)},cancel:t.cancel},scopedSlots:t._u([{key:"input",fn:function(){return[e("div",{staticClass:"mt-4 title"},[t._v("Update Jumlah Buku")])]},proxy:!0},{key:"input",fn:function(){return[e("v-slider",{staticClass:"mt-10",attrs:{min:"1",max:a.item.stok_buku,"thumb-size":24,"thumb-label":"always"},model:{value:a.item.jumlah_buku,callback:function(e){t.$set(a.item,"jumlah_buku",e)},expression:"props.item.jumlah_buku"}})]},proxy:!0}],null,!0)},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(u){var i=u.on,s=u.attrs;return[e("div",t._g(t._b({},"div",s,!1),i),[t._v("\n              "+t._s(a.item.jumlah_buku)+" \n              "),e("v-icon",[t._v("mdi-tooltip-edit-outline")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("Edit Jumlah Buku")])])],1)]}},{key:"item.action",fn:function(a){return[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(u){var i=u.on,s=u.attrs;return[e("v-btn",t._g(t._b({staticClass:"mx-2",attrs:{fab:"",dark:"",small:"",color:"red"},on:{click:function(e){return e.preventDefault(),t.tidakJadiPilihBuku(a.item)}}},"v-btn",s,!1),i),[e("v-icon",{attrs:{dark:""}},[t._v("mdi-trash-can-outline")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("Tidak Jadi")])])]}}],null,!0)}),t._v(" "),e("v-overlay",{attrs:{absolute:!0,value:t.overlaybukuTerpilih}},[e("v-progress-circular",{attrs:{size:50,color:"white",indeterminate:""}})],1)],1),t._v(" "),e("v-snackbar",{attrs:{top:"",timeout:3e3,color:t.snackColor},scopedSlots:t._u([{key:"action",fn:function(a){var u=a.attrs;return[e("v-btn",t._b({attrs:{text:""},on:{click:function(a){t.snack=!1}}},"v-btn",u,!1),[t._v("Close")])]}}]),model:{value:t.snack,callback:function(a){t.snack=a},expression:"snack"}},[t._v("\n    "+t._s(t.snackText)+"\n\n    ")])],1)}),[],!1,null,null,null);a.default=r.exports}}]);