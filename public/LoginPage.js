(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{7:function(t,e,r){"use strict";var a={props:["serverError"]},s=r(2),o=Object(s.a)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-alert",{attrs:{border:"top",color:"red lighten-2",dark:"",dismissible:""}},t._l(t.serverError,(function(e,a){return r("ul",{key:a},[r("li",[t._v(t._s(e[0]))])])})),0)}),[],!1,null,null,null);e.a=o.exports},91:function(t,e,r){"use strict";r.r(e);var a=r(7),s=r(0),o=r.n(s),n={components:{ErrorAlert:a.a},data:function(){return{email:"",password:"",serverError:"",snackbar:!1,snackbarColor:"",snackbarText:"",overlay:!1}},methods:{login:function(){var t=this;t.serverError="",t.overlay=!0,o.a.post("api/auth/login",{email:t.email,password:t.password}).then((function(e){var r=e.data.access_token;console.log(r),localStorage.setItem("userToken",r),r&&(o.a.defaults.headers.common.Authorization="Bearer "+r),t.snackbar=!0,t.snackbarColor="success",t.snackbarText="Sign In Successed, now redirecting to your dashboard...",t.overlay=!1,o.a.get("api/auth/me",{headers:{Authorization:"Bearer "+r,withCredentials:!0}}).then((function(e){var r=e.data.role;"admin"==r&&t.$router.push("/siAdmino"),"pustakawan"==r&&t.$router.push("/perpus")})).catch((function(t){console.log(t)}))})).catch((function(e){localStorage.removeItem("userToken"),t.overlay=!1,e.response&&(t.serverError=e.response.data.errors,t.password="")}))}}},l=r(2),i=Object(l.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-content",{staticClass:"pt-0"},[r("v-container",{staticClass:"fill-height py-0",attrs:{fluid:""}},[r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{cols:"12",sm:"12",md:"7",lg:"7"}},[r("v-img",{staticClass:"mx-auto",attrs:{src:"/statics/login.png","max-width":"400"}})],1),t._v(" "),r("v-col",{staticClass:"pa-0",attrs:{cols:"12",sm:"12",md:"5",lg:"5"}},[r("v-card",{staticClass:"deep-purple d-flex align-center",attrs:{height:"110vh",dark:"",rounded:"0"}},[r("v-row",[r("v-col",[r("v-card-text",{staticClass:"text-center"},[r("div",{staticClass:"text-h6"},[t._v("Welcome!")]),t._v(" "),r("div",{staticClass:"text-subtitle1 pb-3"},[t._v("Sign in to your account")])]),t._v(" "),t.serverError?r("v-card-text",{staticClass:"py-0"},[t.serverError?r("error-alert",{staticClass:"mx-5",attrs:{serverError:t.serverError}}):t._e()],1):t._e(),t._v(" "),r("v-card-text",{staticClass:"text-center"},[r("v-form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[r("v-text-field",{staticClass:"mx-5",attrs:{label:"Email",filled:"",dense:"",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),r("v-text-field",{staticClass:"mx-5",attrs:{label:"Password",filled:"",dense:"",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),r("v-btn",{staticClass:"mb-3",attrs:{rounded:"",color:"white",width:"300px",type:"submit"}},[r("div",{staticClass:"font-weight-bold deep-purple--text"},[t._v("Sign In")])])],1),t._v(" "),r("a",{staticClass:"text-subtitle1 white--text",attrs:{href:"/forgot-password"}},[t._v("Fogot Password?")])],1)],1)],1),t._v(" "),r("v-overlay",{attrs:{absolute:!0,value:t.overlay}},[r("v-progress-circular",{attrs:{size:50,color:"white",indeterminate:""}})],1)],1)],1)],1)],1),t._v(" "),r("v-snackbar",{attrs:{timeout:5e3,color:t.snackbarColor},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n\t\t"+t._s(t.snackbarText)+"\n\t\t"),r("v-btn",{attrs:{color:"white",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("\n\t\t\tClose\n\t\t")])],1)],1)}),[],!1,null,null,null);e.default=i.exports}}]);